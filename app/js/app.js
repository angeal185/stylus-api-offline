function reload(i){setTimeout(function(){location.reload(!0)},i)}function dataCheck(setData){setData.forEach(function(i){localStorage.getItem(i)&&""!==localStorage.getItem(i)||$.getJSON("./app/data/"+i+".json",function(data,status){"success"===!status&&console.log("unable to get "+i+".json"),localStorage.setItem(i,JSON.stringify(data)),localStorage.setItem(i+"Hash",sha3(JSON.stringify(data))),reload(1e3)})})}function hashCheck(setData){setData.forEach(function(i){$.getJSON("./app/data/"+i+".json",function(data,status){"success"===!status&&console.log("unable to get "+i+".json");var dHash=JSON.stringify(data);localStorage.getItem(i+"Hash")&&localStorage.getItem(i+"Hash")===sha3(dHash)||(localStorage.setItem(i,dHash),localStorage.setItem(i+"Hash",sha3(dHash)),reload(1e3))})})}function getData(){var setData=["data","templates"];$("body").prepend('<div class="splash"><IMG class="displayed" src="./app/img/stylus-logo.svg" alt="Stylus" /></div>'),dataCheck(setData),hashCheck(setData),build()}function build(){var Data=JSON.parse(localStorage.getItem("data")),headerTpl=Data.header,sidebarTpl=Data.sidebar,div=$("<div />");$(".splash").after(div.clone().addClass("wrap").prepend(sidebarTpl,$("<main />").addClass("main-content").prepend(headerTpl,div.clone().attr("id","main-content")))),$(Data.nav).each(function(index,el){$("#navLink").append('<a data-href="'+el.url+'">'+el.title+"</li>")}),init()}function init(){var Tpl=JSON.parse(localStorage.getItem("templates"));$("#main-content").html(Tpl.home),initHjs("pre code"),$("#navLink > a").click(function(event){var url=$(this).attr("data-href");$("#main-content").html(Tpl[url]),$(".sidebar").animate({left:"toggle"},0),$(".sbToggleShow, .sbToggle").toggleClass("sbToggleShow sbToggle"),initHjs("pre code")}),$(".sbToggle").click(function(){$(".sidebar").animate({left:"toggle"},0),$(this).toggleClass("sbToggleShow sbToggle")})}function initHjs(ele){$(ele).each(function(i,block){hljs.highlightBlock(block)})}getData();